<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug - View Universal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 p-8">
    <div class="container mx-auto">
        <h1 class="text-2xl font-bold mb-4">Debug - View Universal do Paciente</h1>
        
        <div class="bg-white rounded-lg p-6 mb-4">
            <button onclick="testDirectOpen()" class="bg-blue-600 text-white px-6 py-3 rounded hover:bg-blue-700">
                Teste Direto - Abrir View
            </button>
        </div>
        
        <div id="log" class="bg-black text-green-400 p-4 rounded font-mono text-sm h-64 overflow-y-auto"></div>
    </div>
    
    <script>
        function log(msg) {
            const logDiv = document.getElementById('log');
            const time = new Date().toLocaleTimeString();
            logDiv.innerHTML += `[${time}] ${msg}\n`;
            console.log(msg);
        }
        
        function testDirectOpen() {
            log('Iniciando teste direto...');
            
            // Criar modal manualmente
            let modal = document.getElementById('test-modal');
            if (modal) {
                modal.remove();
                log('Modal anterior removido');
            }
            
            modal = document.createElement('div');
            modal.id = 'test-modal';
            modal.className = 'fixed inset-0 z-50 bg-black bg-opacity-50';
            modal.style.display = 'flex';
            modal.style.alignItems = 'center';
            modal.style.justifyContent = 'center';
            
            modal.innerHTML = `
                <div class="bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl">
                    <div class="bg-gradient-to-r from-teal-600 to-teal-700 text-white p-6">
                        <div class="flex justify-between">
                            <h2 class="text-2xl font-bold">Maria Silva Santos</h2>
                            <button onclick="document.getElementById('test-modal').remove()" class="text-white hover:text-gray-200">
                                <i class="fas fa-times text-2xl"></i>
                            </button>
                        </div>
                    </div>
                    <div class="p-6">
                        <h3 class="text-xl font-bold mb-4">View Universal Funcionando!</h3>
                        <p>Se você está vendo isso, o sistema de modal funciona.</p>
                        <div class="mt-4 grid grid-cols-2 gap-4">
                            <div class="bg-blue-50 p-4 rounded">
                                <h4 class="font-bold">Dados Clínicos</h4>
                                <p>CA Mama - Estadio IIA</p>
                            </div>
                            <div class="bg-green-50 p-4 rounded">
                                <h4 class="font-bold">Equipe Médica</h4>
                                <p>Dr. Roberto Almeida</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            log('Modal criado e adicionado ao DOM');
            log('Display: ' + modal.style.display);
            log('Visibility: ' + window.getComputedStyle(modal).visibility);
        }
        
        // Teste automático ao carregar
        window.addEventListener('DOMContentLoaded', () => {
            log('Página carregada');
            log('Testando criação de elementos...');
            
            const testDiv = document.createElement('div');
            testDiv.innerHTML = 'Teste';
            document.body.appendChild(testDiv);
            
            if (document.body.contains(testDiv)) {
                log('✅ Criação de elementos funciona');
                testDiv.remove();
            } else {
                log('❌ Problema na criação de elementos');
            }
        });
    </script>
</body>
</html>